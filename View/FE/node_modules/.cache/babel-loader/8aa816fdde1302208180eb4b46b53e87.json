{"ast":null,"code":"import React, { useContext, useEffect, useRef } from \"react\";\nimport { MapContext } from \"./ReactBingMap\";\n\nvar clearQ = function (q) {\n  q.forEach(clearTimeout);\n  q.splice(0, q.length);\n};\n\nvar ViewController = function (_a) {\n  var _b = _a.center,\n      center = _b === void 0 ? new window.Microsoft.Maps.Location(0, 0) : _b,\n      _c = _a.zoom,\n      zoom = _c === void 0 ? 2 : _c,\n      children = _a.children;\n  var map = useContext(MapContext);\n  var animationQueue = useRef([]).current;\n  var prevZoomRef = useRef(zoom);\n  useEffect(function () {\n    var prevZoom = prevZoomRef.current;\n    prevZoomRef.current = zoom;\n\n    var _a = map.getCenter(),\n        latOld = _a.latitude,\n        lngOld = _a.longitude;\n\n    var latNew = center.latitude,\n        lngNew = center.longitude;\n\n    if (Math.abs(zoom - prevZoom) < 1 - 1e-6 && latNew === latOld && lngNew === lngOld) {\n      return;\n    }\n\n    clearQ(animationQueue);\n\n    if (Math.abs(zoom - prevZoom) >= 1e-6 && latNew === latOld && lngNew === lngOld || Math.abs(zoom - prevZoom) < 1e-6) {\n      map.setView({\n        zoom: zoom,\n        center: center,\n        // @ts-ignore-next-line\n        animate: true\n      });\n      return;\n    }\n\n    var iterCount = Math.abs(prevZoom - zoom) >= 1 ? Math.floor(Math.abs(prevZoom - zoom)) : 1;\n    var dt = 100; // ms\n\n    var dZoom = (zoom - prevZoom) / iterCount;\n    var dLat = (latNew - latOld) / iterCount;\n    var dLng = (lngNew - lngOld) / iterCount;\n\n    var _loop_1 = function (i) {\n      var timeout = setTimeout(function () {\n        map.setView({\n          center: new window.Microsoft.Maps.Location(latOld + dLat * i, lngOld + dLng * i),\n          zoom: prevZoom + dZoom * i,\n          // @ts-ignore-next-line\n          animate: true\n        });\n        animationQueue.splice(animationQueue.findIndex(function (to) {\n          return to === timeout;\n        }), 1);\n      }, dt * (i - 1));\n      animationQueue.push(timeout);\n    };\n\n    for (var i = 1; i <= iterCount; i++) {\n      _loop_1(i);\n    }\n\n    var vcc = window.Microsoft.Maps.Events.addHandler(map, \"viewchange\", function (e) {\n      if (e.cause !== 0) {\n        clearQ(animationQueue);\n        window.Microsoft.Maps.Events.removeHandler(vcc);\n      }\n    });\n    setTimeout(function () {\n      window.Microsoft.Maps.Events.removeHandler(vcc);\n    }, dt * iterCount);\n  }, [zoom, center.latitude, center.longitude]);\n  return React.createElement(React.Fragment, null, children);\n};\n\nexport default React.memo(ViewController);","map":{"version":3,"names":["React","useContext","useEffect","useRef","MapContext","clearQ","q","forEach","clearTimeout","splice","length","ViewController","_a","_b","center","window","Microsoft","Maps","Location","_c","zoom","children","map","animationQueue","current","prevZoomRef","prevZoom","getCenter","latOld","latitude","lngOld","longitude","latNew","lngNew","Math","abs","setView","animate","iterCount","floor","dt","dZoom","dLat","dLng","_loop_1","i","timeout","setTimeout","findIndex","to","push","vcc","Events","addHandler","e","cause","removeHandler","createElement","Fragment","memo"],"sources":["C:/Users/user/Desktop/realTimeFlights/View/FE/node_modules/@3acaga/react-bing-maps/dist/ViewController.js"],"sourcesContent":["import React, { useContext, useEffect, useRef } from \"react\";\nimport { MapContext } from \"./ReactBingMap\";\nvar clearQ = function (q) {\n    q.forEach(clearTimeout);\n    q.splice(0, q.length);\n};\nvar ViewController = function (_a) {\n    var _b = _a.center, center = _b === void 0 ? new window.Microsoft.Maps.Location(0, 0) : _b, _c = _a.zoom, zoom = _c === void 0 ? 2 : _c, children = _a.children;\n    var map = useContext(MapContext);\n    var animationQueue = useRef([]).current;\n    var prevZoomRef = useRef(zoom);\n    useEffect(function () {\n        var prevZoom = prevZoomRef.current;\n        prevZoomRef.current = zoom;\n        var _a = map.getCenter(), latOld = _a.latitude, lngOld = _a.longitude;\n        var latNew = center.latitude, lngNew = center.longitude;\n        if (Math.abs(zoom - prevZoom) < 1 - 1e-6 &&\n            (latNew === latOld && lngNew === lngOld)) {\n            return;\n        }\n        clearQ(animationQueue);\n        if ((Math.abs(zoom - prevZoom) >= 1e-6 &&\n            (latNew === latOld && lngNew === lngOld)) ||\n            Math.abs(zoom - prevZoom) < 1e-6) {\n            map.setView({\n                zoom: zoom,\n                center: center,\n                // @ts-ignore-next-line\n                animate: true\n            });\n            return;\n        }\n        var iterCount = Math.abs(prevZoom - zoom) >= 1\n            ? Math.floor(Math.abs(prevZoom - zoom))\n            : 1;\n        var dt = 100; // ms\n        var dZoom = (zoom - prevZoom) / iterCount;\n        var dLat = (latNew - latOld) / iterCount;\n        var dLng = (lngNew - lngOld) / iterCount;\n        var _loop_1 = function (i) {\n            var timeout = setTimeout(function () {\n                map.setView({\n                    center: new window.Microsoft.Maps.Location(latOld + dLat * i, lngOld + dLng * i),\n                    zoom: prevZoom + dZoom * i,\n                    // @ts-ignore-next-line\n                    animate: true\n                });\n                animationQueue.splice(animationQueue.findIndex(function (to) { return to === timeout; }), 1);\n            }, dt * (i - 1));\n            animationQueue.push(timeout);\n        };\n        for (var i = 1; i <= iterCount; i++) {\n            _loop_1(i);\n        }\n        var vcc = window.Microsoft.Maps.Events.addHandler(map, \"viewchange\", function (e) {\n            if (e.cause !== 0) {\n                clearQ(animationQueue);\n                window.Microsoft.Maps.Events.removeHandler(vcc);\n            }\n        });\n        setTimeout(function () {\n            window.Microsoft.Maps.Events.removeHandler(vcc);\n        }, dt * iterCount);\n    }, [zoom, center.latitude, center.longitude]);\n    return React.createElement(React.Fragment, null, children);\n};\nexport default React.memo(ViewController);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}